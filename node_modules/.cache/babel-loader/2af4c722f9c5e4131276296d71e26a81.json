{"ast":null,"code":"import{BehaviorSubject}from\"rxjs\";import{API_USERNAME,API_PASSWORD,CLIENT_LOGIN}from\"./axiousURL\";import axios from\"./axiosConfig\";var currentUserSubject=new BehaviorSubject(JSON.parse(localStorage.getItem(\"currentUser\")));export var AuthenticationService={login:login,logout:logout,currentUser:currentUserSubject.asObservable(),get currentUserValue(){return currentUserSubject.value;}};function login(username,password){var bodyFormData=new FormData();bodyFormData.append(\"api_username\",API_USERNAME);bodyFormData.append(\"api_password\",API_PASSWORD);bodyFormData.append(\"email_address\",username);bodyFormData.append(\"password\",password);return axios({method:\"post\",url:CLIENT_LOGIN,data:bodyFormData,headers:new Headers(),redirect:'follow'}).then(function(response){if(response.data.message_key==='no_users_found'){var error=response.data.message;return Promise.reject(error);}else{var user=response.data.data[0];localStorage.setItem(\"currentUser\",JSON.stringify(user));currentUserSubject.next(user);return user;}});/*.catch(function (catchError) {\r\n\t\tconsole.log('catch error', catchError);\r\n\t\treturn Promise.reject(catchError.message);\r\n\t});*/}function logout(){// remove user from local storage to log user out\nlocalStorage.removeItem(\"currentUser\");currentUserSubject.next(null);}","map":{"version":3,"sources":["/Users/omerobaid/Projects/react-projects/xotic-labs/src/jwt/_services/Authentication.service.js"],"names":["BehaviorSubject","API_USERNAME","API_PASSWORD","CLIENT_LOGIN","axios","currentUserSubject","JSON","parse","localStorage","getItem","AuthenticationService","login","logout","currentUser","asObservable","currentUserValue","value","username","password","bodyFormData","FormData","append","method","url","data","headers","Headers","redirect","then","response","message_key","error","message","Promise","reject","user","setItem","stringify","next","removeItem"],"mappings":"AAAA,OAASA,eAAT,KAAgC,MAAhC,CACA,OAASC,YAAT,CAAuBC,YAAvB,CAAqCC,YAArC,KAAyD,aAAzD,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,GAAIL,CAAAA,eAAJ,CAC1BM,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAD0B,CAA3B,CAIA,MAAO,IAAMC,CAAAA,qBAAqB,CAAG,CACpCC,KAAK,CAALA,KADoC,CAEpCC,MAAM,CAANA,MAFoC,CAGpCC,WAAW,CAAER,kBAAkB,CAACS,YAAnB,EAHuB,CAIpC,GAAIC,CAAAA,gBAAJ,EAAuB,CACtB,MAAOV,CAAAA,kBAAkB,CAACW,KAA1B,CACA,CANmC,CAA9B,CASP,QAASL,CAAAA,KAAT,CAAeM,QAAf,CAAyBC,QAAzB,CAAmC,CAElC,GAAIC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,QAAJ,EAAnB,CACAD,YAAY,CAACE,MAAb,CACC,cADD,CACiBpB,YADjB,EAGAkB,YAAY,CAACE,MAAb,CACC,cADD,CACiBnB,YADjB,EAGAiB,YAAY,CAACE,MAAb,CAAoB,eAApB,CAAqCJ,QAArC,EACAE,YAAY,CAACE,MAAb,CAAoB,UAApB,CAAgCH,QAAhC,EAEA,MAAOd,CAAAA,KAAK,CAAC,CACZkB,MAAM,CAAE,MADI,CAEZC,GAAG,CAAEpB,YAFO,CAGZqB,IAAI,CAAEL,YAHM,CAIZM,OAAO,CAAE,GAAIC,CAAAA,OAAJ,EAJG,CAKZC,QAAQ,CAAE,QALE,CAAD,CAAL,CAMJC,IANI,CAMC,SAAUC,QAAV,CAAoB,CAC3B,GAAIA,QAAQ,CAACL,IAAT,CAAcM,WAAd,GAA8B,gBAAlC,CAAoD,CACnD,GAAMC,CAAAA,KAAK,CAAGF,QAAQ,CAACL,IAAT,CAAcQ,OAA5B,CACA,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP,CACA,CAHD,IAGO,CACN,GAAMI,CAAAA,IAAI,CAAGN,QAAQ,CAACL,IAAT,CAAcA,IAAd,CAAmB,CAAnB,CAAb,CACAhB,YAAY,CAAC4B,OAAb,CAAqB,aAArB,CAAoC9B,IAAI,CAAC+B,SAAL,CAAeF,IAAf,CAApC,EACA9B,kBAAkB,CAACiC,IAAnB,CAAwBH,IAAxB,EACA,MAAOA,CAAAA,IAAP,CACA,CACD,CAhBM,CAAP,CAgBG;AACJ;AACA;AACA,MACC,CAED,QAASvB,CAAAA,MAAT,EAAkB,CACjB;AACAJ,YAAY,CAAC+B,UAAb,CAAwB,aAAxB,EACAlC,kBAAkB,CAACiC,IAAnB,CAAwB,IAAxB,EACA","sourcesContent":["import { BehaviorSubject } from \"rxjs\";\r\nimport { API_USERNAME, API_PASSWORD, CLIENT_LOGIN } from \"./axiousURL\";\r\nimport axios from \"./axiosConfig\";\r\n\r\nconst currentUserSubject = new BehaviorSubject(\r\n\tJSON.parse(localStorage.getItem(\"currentUser\"))\r\n);\r\n\r\nexport const AuthenticationService = {\r\n\tlogin,\r\n\tlogout,\r\n\tcurrentUser: currentUserSubject.asObservable(),\r\n\tget currentUserValue() {\r\n\t\treturn currentUserSubject.value;\r\n\t},\r\n};\r\n\r\nfunction login(username, password) {\r\n\r\n\tvar bodyFormData = new FormData();\r\n\tbodyFormData.append(\r\n\t\t\"api_username\", API_USERNAME\r\n\t);\r\n\tbodyFormData.append(\r\n\t\t\"api_password\", API_PASSWORD\r\n\t);\r\n\tbodyFormData.append(\"email_address\", username);\r\n\tbodyFormData.append(\"password\", password);\r\n\r\n\treturn axios({\r\n\t\tmethod: \"post\",\r\n\t\turl: CLIENT_LOGIN,\r\n\t\tdata: bodyFormData,\r\n\t\theaders: new Headers(),\r\n\t\tredirect: 'follow'\r\n\t}).then(function (response) {\r\n\t\tif (response.data.message_key === 'no_users_found') {\r\n\t\t\tconst error = response.data.message;\r\n\t\t\treturn Promise.reject(error);\r\n\t\t} else {\r\n\t\t\tconst user = response.data.data[0];\r\n\t\t\tlocalStorage.setItem(\"currentUser\", JSON.stringify(user));\r\n\t\t\tcurrentUserSubject.next(user);\r\n\t\t\treturn user;\r\n\t\t}\r\n\t});/*.catch(function (catchError) {\r\n\t\tconsole.log('catch error', catchError);\r\n\t\treturn Promise.reject(catchError.message);\r\n\t});*/\r\n}\r\n\r\nfunction logout() {\r\n\t// remove user from local storage to log user out\r\n\tlocalStorage.removeItem(\"currentUser\");\r\n\tcurrentUserSubject.next(null);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}