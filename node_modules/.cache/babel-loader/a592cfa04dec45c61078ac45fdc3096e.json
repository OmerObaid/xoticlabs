{"ast":null,"code":"import { BehaviorSubject } from \"rxjs\";\nimport { API_USERNAME, API_PASSWORD, ADMIN_LOGIN, CLIENT_LOGIN } from \"./axiousURL\";\nimport axios from \"./axiosConfig\";\nconst currentUserSubject = new BehaviorSubject(JSON.parse(localStorage.getItem(\"currentUser\")));\nexport const AuthenticationService = {\n  login,\n  logout,\n  currentUser: currentUserSubject.asObservable(),\n\n  get currentUserValue() {\n    return currentUserSubject.value;\n  }\n\n};\n\nfunction login(username, password) {\n  var bodyFormData = new FormData();\n  bodyFormData.append(\"api_username\", API_USERNAME);\n  bodyFormData.append(\"api_password\", API_PASSWORD);\n  bodyFormData.append(\"email_address\", username);\n  bodyFormData.append(\"password\", password);\n  return axios({\n    method: \"post\",\n    url: CLIENT_LOGIN,\n    data: bodyFormData,\n    headers: new Headers(),\n    redirect: 'follow'\n  }).then(function (response) {\n    if (response.data.message_key === 'no_users_found') {\n      const error = response.data.message;\n      return Promise.reject(error);\n    } else {\n      const user = response.data.data[0];\n      localStorage.setItem(\"currentUser\", JSON.stringify(user));\n      currentUserSubject.next(user);\n      return user;\n    }\n  });\n  /*.catch(function (catchError) {\r\n  console.log('catch error', catchError);\r\n  return Promise.reject(catchError.message);\r\n  });*/\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem(\"currentUser\");\n  currentUserSubject.next(null);\n}","map":{"version":3,"sources":["/Users/omerobaid/Projects/react-projects/xotic-labs/src/jwt/_services/Authentication.service.js"],"names":["BehaviorSubject","API_USERNAME","API_PASSWORD","ADMIN_LOGIN","CLIENT_LOGIN","axios","currentUserSubject","JSON","parse","localStorage","getItem","AuthenticationService","login","logout","currentUser","asObservable","currentUserValue","value","username","password","bodyFormData","FormData","append","method","url","data","headers","Headers","redirect","then","response","message_key","error","message","Promise","reject","user","setItem","stringify","next","removeItem"],"mappings":"AAAA,SAASA,eAAT,QAAgC,MAAhC;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,WAArC,EAAkDC,YAAlD,QAAsE,aAAtE;AACA,OAAOC,KAAP,MAAkB,eAAlB;AAEA,MAAMC,kBAAkB,GAAG,IAAIN,eAAJ,CAC1BO,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAD0B,CAA3B;AAIA,OAAO,MAAMC,qBAAqB,GAAG;AACpCC,EAAAA,KADoC;AAEpCC,EAAAA,MAFoC;AAGpCC,EAAAA,WAAW,EAAER,kBAAkB,CAACS,YAAnB,EAHuB;;AAIpC,MAAIC,gBAAJ,GAAuB;AACtB,WAAOV,kBAAkB,CAACW,KAA1B;AACA;;AANmC,CAA9B;;AASP,SAASL,KAAT,CAAeM,QAAf,EAAyBC,QAAzB,EAAmC;AAElC,MAAIC,YAAY,GAAG,IAAIC,QAAJ,EAAnB;AACAD,EAAAA,YAAY,CAACE,MAAb,CACC,cADD,EACiBrB,YADjB;AAGAmB,EAAAA,YAAY,CAACE,MAAb,CACC,cADD,EACiBpB,YADjB;AAGAkB,EAAAA,YAAY,CAACE,MAAb,CAAoB,eAApB,EAAqCJ,QAArC;AACAE,EAAAA,YAAY,CAACE,MAAb,CAAoB,UAApB,EAAgCH,QAAhC;AAEA,SAAOd,KAAK,CAAC;AACZkB,IAAAA,MAAM,EAAE,MADI;AAEZC,IAAAA,GAAG,EAAEpB,YAFO;AAGZqB,IAAAA,IAAI,EAAEL,YAHM;AAIZM,IAAAA,OAAO,EAAE,IAAIC,OAAJ,EAJG;AAKZC,IAAAA,QAAQ,EAAE;AALE,GAAD,CAAL,CAMJC,IANI,CAMC,UAAUC,QAAV,EAAoB;AAC3B,QAAIA,QAAQ,CAACL,IAAT,CAAcM,WAAd,KAA8B,gBAAlC,EAAoD;AACnD,YAAMC,KAAK,GAAGF,QAAQ,CAACL,IAAT,CAAcQ,OAA5B;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACA,KAHD,MAGO;AACN,YAAMI,IAAI,GAAGN,QAAQ,CAACL,IAAT,CAAcA,IAAd,CAAmB,CAAnB,CAAb;AACAhB,MAAAA,YAAY,CAAC4B,OAAb,CAAqB,aAArB,EAAoC9B,IAAI,CAAC+B,SAAL,CAAeF,IAAf,CAApC;AACA9B,MAAAA,kBAAkB,CAACiC,IAAnB,CAAwBH,IAAxB;AACA,aAAOA,IAAP;AACA;AACD,GAhBM,CAAP;AAgBG;AACJ;AACA;AACA;AACC;;AAED,SAASvB,MAAT,GAAkB;AACjB;AACAJ,EAAAA,YAAY,CAAC+B,UAAb,CAAwB,aAAxB;AACAlC,EAAAA,kBAAkB,CAACiC,IAAnB,CAAwB,IAAxB;AACA","sourcesContent":["import { BehaviorSubject } from \"rxjs\";\r\nimport { API_USERNAME, API_PASSWORD, ADMIN_LOGIN, CLIENT_LOGIN } from \"./axiousURL\";\r\nimport axios from \"./axiosConfig\";\r\n\r\nconst currentUserSubject = new BehaviorSubject(\r\n\tJSON.parse(localStorage.getItem(\"currentUser\"))\r\n);\r\n\r\nexport const AuthenticationService = {\r\n\tlogin,\r\n\tlogout,\r\n\tcurrentUser: currentUserSubject.asObservable(),\r\n\tget currentUserValue() {\r\n\t\treturn currentUserSubject.value;\r\n\t},\r\n};\r\n\r\nfunction login(username, password) {\r\n\r\n\tvar bodyFormData = new FormData();\r\n\tbodyFormData.append(\r\n\t\t\"api_username\", API_USERNAME\r\n\t);\r\n\tbodyFormData.append(\r\n\t\t\"api_password\", API_PASSWORD\r\n\t);\r\n\tbodyFormData.append(\"email_address\", username);\r\n\tbodyFormData.append(\"password\", password);\r\n\r\n\treturn axios({\r\n\t\tmethod: \"post\",\r\n\t\turl: CLIENT_LOGIN,\r\n\t\tdata: bodyFormData,\r\n\t\theaders: new Headers(),\r\n\t\tredirect: 'follow'\r\n\t}).then(function (response) {\r\n\t\tif (response.data.message_key === 'no_users_found') {\r\n\t\t\tconst error = response.data.message;\r\n\t\t\treturn Promise.reject(error);\r\n\t\t} else {\r\n\t\t\tconst user = response.data.data[0];\r\n\t\t\tlocalStorage.setItem(\"currentUser\", JSON.stringify(user));\r\n\t\t\tcurrentUserSubject.next(user);\r\n\t\t\treturn user;\r\n\t\t}\r\n\t});/*.catch(function (catchError) {\r\n\t\tconsole.log('catch error', catchError);\r\n\t\treturn Promise.reject(catchError.message);\r\n\t});*/\r\n}\r\n\r\nfunction logout() {\r\n\t// remove user from local storage to log user out\r\n\tlocalStorage.removeItem(\"currentUser\");\r\n\tcurrentUserSubject.next(null);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}